{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'https://we-test-tm-applinux-01.azurewebsites.net/api';// Create axios instance with default config\nconst apiClient=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'}});// Add a response interceptor for error handling\napiClient.interceptors.response.use(response=>response,error=>{var _error$response;console.error('API Error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);return Promise.reject(error);});// Telemetry API endpoints\nexport const telemetryApi={// Get global telemetry status for all countries\ngetGlobalStatus:async()=>{try{console.log('Calling getGlobalStatus API');const response=await apiClient.get('/telemetry/global');console.log('Received API response:',response.data);return response;}catch(error){console.error('API Error in getGlobalStatus:',error);throw error;}},// Get detailed telemetry status for a specific country\ngetCountryStatus:async countryId=>{try{console.log(`Calling getCountryStatus API for country: ${countryId}`);const response=await apiClient.get(`/telemetry/country/${countryId}`);console.log('Received API response:',response.data);return response;}catch(error){console.error(`API Error in getCountryStatus for ${countryId}:`,error);throw error;}}};// History API endpoints\nexport const historyApi={// Get status history with time-based filtering\ngetStatusHistory:async function(){let timeRange=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'5d';let startDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let endDate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const params={timeRange};if(timeRange==='custom'&&startDate&&endDate){params.startDate=startDate;params.endDate=endDate;}const response=await apiClient.get('/history',{params});return response;}catch(error){console.error('API Error in getStatusHistory:',error);throw error;}},// Get phone number history with time-based filtering\ngetPhoneHistory:async function(){let timeRange=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'5d';let startDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let endDate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let number=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;try{const params={timeRange};if(timeRange==='custom'&&startDate&&endDate){params.startDate=startDate;params.endDate=endDate;}if(number){params.number=number;}const response=await apiClient.get('/history/phone',{params});return response;}catch(error){console.error('API Error in getPhoneHistory:',error);throw error;}}};// Phone Numbers API endpoints\nexport const phoneApi={// Get phone numbers for a specific country\ngetPhoneNumbersByCountry:async country=>{try{console.log(`Calling getPhoneNumbersByCountry API for country: ${country}`);const response=await apiClient.get(`/phone/country/${encodeURIComponent(country)}`);console.log('Received API response:',response.data);return response;}catch(error){// If 404, provide a nicer error message\nif(error.response&&error.response.status===404){console.error(`API Error in getPhoneNumbersByCountry for ${country}: Endpoint not found (404)`);// Create a structured error object for better debugging\nconst enhancedError={...error,response:{...error.response,data:{success:false,message:`No phone numbers found for ${country}`}}};throw enhancedError;}console.error(`API Error in getPhoneNumbersByCountry for ${country}:`,error);throw error;}},// If you have other phone-related endpoints, add them here\ngetPhoneDetails:async phoneId=>{try{const response=await apiClient.get(`/phone/${phoneId}`);return response;}catch(error){console.error(`API Error in getPhoneDetails for ${phoneId}:`,error);throw error;}}};export default apiClient;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","response","use","error","_error$response","console","data","message","Promise","reject","telemetryApi","getGlobalStatus","log","get","getCountryStatus","countryId","historyApi","getStatusHistory","timeRange","arguments","length","undefined","startDate","endDate","params","getPhoneHistory","number","phoneApi","getPhoneNumbersByCountry","country","encodeURIComponent","status","enhancedError","success","getPhoneDetails","phoneId"],"sources":["/Users/ben/Downloads/gitTemp/tm_react/client/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'https://we-test-tm-applinux-01.azurewebsites.net/api';\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add a response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error('API Error:', error.response?.data || error.message);\n    return Promise.reject(error);\n  }\n);\n\n// Telemetry API endpoints\nexport const telemetryApi = {\n  // Get global telemetry status for all countries\n  getGlobalStatus: async () => {\n    try {\n      console.log('Calling getGlobalStatus API');\n      const response = await apiClient.get('/telemetry/global');\n      console.log('Received API response:', response.data);\n      return response;\n    } catch (error) {\n      console.error('API Error in getGlobalStatus:', error);\n      throw error;\n    }\n  },\n\n  // Get detailed telemetry status for a specific country\n  getCountryStatus: async (countryId) => {\n    try {\n      console.log(`Calling getCountryStatus API for country: ${countryId}`);\n      const response = await apiClient.get(`/telemetry/country/${countryId}`);\n      console.log('Received API response:', response.data);\n      return response;\n    } catch (error) {\n      console.error(`API Error in getCountryStatus for ${countryId}:`, error);\n      throw error;\n    }\n  }\n};\n\n// History API endpoints\nexport const historyApi = {\n  // Get status history with time-based filtering\n  getStatusHistory: async (timeRange = '5d', startDate = null, endDate = null) => {\n    try {\n      const params = { timeRange };\n      \n      if (timeRange === 'custom' && startDate && endDate) {\n        params.startDate = startDate;\n        params.endDate = endDate;\n      }\n      \n      const response = await apiClient.get('/history', { params });\n      return response;\n    } catch (error) {\n      console.error('API Error in getStatusHistory:', error);\n      throw error;\n    }\n  },\n  \n  // Get phone number history with time-based filtering\n  getPhoneHistory: async (timeRange = '5d', startDate = null, endDate = null, number = null) => {\n    try {\n      const params = { timeRange };\n      \n      if (timeRange === 'custom' && startDate && endDate) {\n        params.startDate = startDate;\n        params.endDate = endDate;\n      }\n      \n      if (number) {\n        params.number = number;\n      }\n      \n      const response = await apiClient.get('/history/phone', { params });\n      return response;\n    } catch (error) {\n      console.error('API Error in getPhoneHistory:', error);\n      throw error;\n    }\n  }\n};\n\n// Phone Numbers API endpoints\nexport const phoneApi = {\n  // Get phone numbers for a specific country\n  getPhoneNumbersByCountry: async (country) => {\n    try {\n      console.log(`Calling getPhoneNumbersByCountry API for country: ${country}`);\n      const response = await apiClient.get(`/phone/country/${encodeURIComponent(country)}`);\n      console.log('Received API response:', response.data);\n      return response;\n    } catch (error) {\n      // If 404, provide a nicer error message\n      if (error.response && error.response.status === 404) {\n        console.error(`API Error in getPhoneNumbersByCountry for ${country}: Endpoint not found (404)`);\n        // Create a structured error object for better debugging\n        const enhancedError = { \n          ...error,\n          response: {\n            ...error.response,\n            data: {\n              success: false,\n              message: `No phone numbers found for ${country}`\n            }\n          }\n        };\n        throw enhancedError;\n      }\n      \n      console.error(`API Error in getPhoneNumbersByCountry for ${country}:`, error);\n      throw error;\n    }\n  },\n  \n  // If you have other phone-related endpoints, add them here\n  getPhoneDetails: async (phoneId) => {\n    try {\n      const response = await apiClient.get(`/phone/${phoneId}`);\n      return response;\n    } catch (error) {\n      console.error(`API Error in getPhoneDetails for ${phoneId}:`, error);\n      throw error;\n    }\n  }\n};\n\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}