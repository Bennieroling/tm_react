{"ast":null,"code":"var _jsxFileName = \"/Users/benvandijk/Downloads/monitoring/TM/telephony-monitor/client/src/views/GlobalHistoryView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { historyApi } from '../services/api';\nimport StatusIndicator from '../components/StatusIndicator';\nimport './GlobalHistoryView.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalHistoryView = () => {\n  _s();\n  const [historyData, setHistoryData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [activeFilter, setActiveFilter] = useState(null);\n  const [showOngoingOnly, setShowOngoingOnly] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [viewMode, setViewMode] = useState('country'); // 'country' or 'phone'\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Filter settings\n  const [timeRange, setTimeRange] = useState('5d');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [showCustomDates, setShowCustomDates] = useState(false);\n  useEffect(() => {\n    fetchHistoryData();\n  }, [timeRange, viewMode]);\n\n  // Apply filters when activeFilter changes or historyData updates\n  useEffect(() => {\n    // First filter out the \"green\" (online) events as we're only interested in issues\n    let filtered = historyData.filter(item => item.status !== 'green');\n\n    // Apply status filter if active\n    if (activeFilter) {\n      filtered = filtered.filter(item => item.status === activeFilter);\n    }\n\n    // Apply search filter if in phone mode\n    if (viewMode === 'phone' && searchTerm) {\n      const term = searchTerm.toLowerCase();\n      filtered = filtered.filter(item => item.number && item.number.toLowerCase().includes(term));\n    }\n\n    // Apply ongoing filter if active\n    if (showOngoingOnly) {\n      filtered = filtered.filter(item => item.status_end === null);\n    }\n    setFilteredData(filtered);\n  }, [activeFilter, showOngoingOnly, historyData, viewMode, searchTerm]);\n  const fetchHistoryData = async () => {\n    try {\n      setLoading(true);\n      let params = {\n        timeRange\n      };\n      if (timeRange === 'custom' && startDate && endDate) {\n        params.startDate = startDate;\n        params.endDate = endDate;\n      }\n      let response;\n      if (viewMode === 'country') {\n        response = await historyApi.getStatusHistory(params.timeRange, params.startDate, params.endDate);\n      } else {\n        response = await historyApi.getPhoneHistory(params.timeRange, params.startDate, params.endDate, searchTerm || null);\n      }\n      setHistoryData(response.data);\n      setFilteredData(response.data);\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to fetch history data. Please try again later.');\n      setLoading(false);\n      console.error('Error fetching history data:', err);\n    }\n  };\n  const handleFilterClick = status => {\n    if (activeFilter === status) {\n      // If clicking the same filter again, clear the filter\n      setActiveFilter(null);\n    } else {\n      setActiveFilter(status);\n    }\n  };\n  const handleOngoingFilterClick = () => {\n    setShowOngoingOnly(!showOngoingOnly);\n    // Don't reset status filter\n  };\n  const clearAllFilters = () => {\n    setActiveFilter(null);\n    setShowOngoingOnly(false);\n    setSearchTerm('');\n  };\n\n  // Get counts by status for issues only\n  const getStatusCounts = () => {\n    const counts = {\n      yellow: 0,\n      red: 0,\n      ongoing: 0,\n      total: 0\n    };\n    historyData.forEach(item => {\n      if (item.status === 'yellow' || item.status === 'red') {\n        counts[item.status] = (counts[item.status] || 0) + 1;\n        counts.total++;\n\n        // Count ongoing issues\n        if (item.status_end === null) {\n          counts.ongoing++;\n        }\n      }\n    });\n    return counts;\n  };\n\n  // Format date to readable format\n  const formatDate = dateString => {\n    if (!dateString) return 'Present';\n    const date = new Date(dateString);\n    return date.toLocaleString();\n  };\n\n  // Calculate duration between start and end times\n  const calculateDuration = (startDate, endDate) => {\n    if (!endDate) return 'Ongoing';\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const durationMs = end - start;\n\n    // Less than a minute\n    if (durationMs < 60000) {\n      return `${Math.floor(durationMs / 1000)} seconds`;\n    }\n    // Less than an hour\n    if (durationMs < 3600000) {\n      return `${Math.floor(durationMs / 60000)} minutes`;\n    }\n    // Less than a day\n    if (durationMs < 86400000) {\n      return `${Math.floor(durationMs / 3600000)} hours`;\n    }\n    // More than a day\n    return `${Math.floor(durationMs / 86400000)} days`;\n  };\n  const handleTimeRangeChange = e => {\n    const newRange = e.target.value;\n    setTimeRange(newRange);\n    setShowCustomDates(newRange === 'custom');\n  };\n  const handleCustomDateSubmit = e => {\n    e.preventDefault();\n    fetchHistoryData();\n  };\n\n  // Group history data by country or phone number\n  const groupData = (data = filteredData) => {\n    const grouped = {};\n    if (viewMode === 'country') {\n      data.forEach(item => {\n        if (!grouped[item.country]) {\n          grouped[item.country] = [];\n        }\n        grouped[item.country].push(item);\n      });\n    } else {\n      data.forEach(item => {\n        if (!grouped[item.number]) {\n          grouped[item.number] = [];\n        }\n        grouped[item.number].push(item);\n      });\n    }\n    return grouped;\n  };\n\n  // Add a title that shows the current filter status\n  const getFilterTitle = () => {\n    let title = \"\";\n    if (activeFilter) {\n      title += `${activeFilter === 'yellow' ? 'Degraded' : 'Offline'} `;\n    } else {\n      title += \"All \";\n    }\n    title += \"Issues\";\n    if (showOngoingOnly) {\n      title += \" (Ongoing Only)\";\n    }\n    return title;\n  };\n  const handleViewModeChange = mode => {\n    setViewMode(mode);\n    // Reset filters when changing view mode\n    setActiveFilter(null);\n    setShowOngoingOnly(false);\n    setSearchTerm('');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading history data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 12\n    }, this);\n  }\n  const groupedData = groupData();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Global Status History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"view-mode-toggle\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `toggle-btn ${viewMode === 'country' ? 'active' : ''}`,\n        onClick: () => handleViewModeChange('country'),\n        children: \"View by Country\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `toggle-btn ${viewMode === 'phone' ? 'active' : ''}`,\n        onClick: () => handleViewModeChange('phone'),\n        children: \"View by Phone Number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-range-selector\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"timeRange\",\n          children: \"Time Range:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"timeRange\",\n          value: timeRange,\n          onChange: handleTimeRangeChange,\n          className: \"time-range-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"24h\",\n            children: \"Last 24 Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"48h\",\n            children: \"Last 48 Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5d\",\n            children: \"Last 5 Days\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"custom\",\n            children: \"Custom Range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), showCustomDates && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCustomDateSubmit,\n        className: \"custom-date-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"startDate\",\n            children: \"Start Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            id: \"startDate\",\n            value: startDate,\n            onChange: e => setStartDate(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"endDate\",\n            children: \"End Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            id: \"endDate\",\n            value: endDate,\n            onChange: e => setEndDate(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"apply-btn\",\n          children: \"Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), viewMode === 'phone' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search phone numbers...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchHistoryData,\n          className: \"search-btn\",\n          disabled: !searchTerm,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-cards\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `summary-card ${activeFilter === 'red' ? 'active' : ''}`,\n          onClick: () => handleFilterClick('red'),\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Offline Issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-count red\",\n            children: getStatusCounts().red\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), activeFilter === 'red' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-badge\",\n            children: \"Filtered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `summary-card ${activeFilter === 'yellow' ? 'active' : ''}`,\n          onClick: () => handleFilterClick('yellow'),\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Degraded Issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-count yellow\",\n            children: getStatusCounts().yellow || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), activeFilter === 'yellow' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-badge\",\n            children: \"Filtered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 43\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-cards\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `summary-card ${!activeFilter && !showOngoingOnly ? 'active' : ''}`,\n          onClick: clearAllFilters,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Total Issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-count blue\",\n            children: getStatusCounts().total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), !activeFilter && !showOngoingOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-badge\",\n            children: \"Showing All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 51\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `summary-card ${showOngoingOnly ? 'active' : ''}`,\n          onClick: handleOngoingFilterClick,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Ongoing Issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-count purple\",\n            children: getStatusCounts().ongoing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), showOngoingOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-badge\",\n            children: \"Filtered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Issues Shown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-value\",\n            children: filteredData.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-detail\",\n            children: activeFilter ? `${activeFilter === 'yellow' ? 'Degraded' : 'Offline'} incidents` : showOngoingOnly ? 'Ongoing incidents' : 'All incidents'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Countries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-value\",\n            children: Object.keys(groupedData).length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-detail\",\n            children: activeFilter ? `With ${activeFilter === 'yellow' ? 'degraded' : 'offline'} issues` : showOngoingOnly ? 'With ongoing issues' : 'With issues'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [viewMode === 'country' ? 'Countries' : 'Phone Numbers', \" - \", getFilterTitle()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), (activeFilter || showOngoingOnly || searchTerm) && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"clear-filter visible\",\n        onClick: clearAllFilters,\n        children: \"Clear All Filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-list\",\n      children: [Object.entries(groupedData).map(([key, events]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: viewMode === 'country' ? \"country-history-card\" : \"phone-history-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: key\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"history-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Started\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ended\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Duration\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this), viewMode === 'phone' && /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Country\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 44\n              }, this), viewMode === 'phone' && /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: events.map(event => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: `status-${event.status}`,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(StatusIndicator, {\n                  status: event.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDate(event.status_start)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDate(event.status_end)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: calculateDuration(event.status_start, event.status_end)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 21\n              }, this), viewMode === 'phone' && /*#__PURE__*/_jsxDEV(\"td\", {\n                children: event.country\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 46\n              }, this), viewMode === 'phone' && /*#__PURE__*/_jsxDEV(\"td\", {\n                children: event.type || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 46\n              }, this)]\n            }, event.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }, this)), Object.keys(groupedData).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results\",\n        children: [\"No \", viewMode === 'country' ? 'countries' : 'phone numbers', \" match the current filters.\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearAllFilters,\n          className: \"clear-link\",\n          children: \"Clear filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(GlobalHistoryView, \"dlh7Olj+f5iae7GWKgJnmk+1jfc=\");\n_c = GlobalHistoryView;\nexport default GlobalHistoryView;\nvar _c;\n$RefreshReg$(_c, \"GlobalHistoryView\");","map":{"version":3,"names":["React","useState","useEffect","historyApi","StatusIndicator","jsxDEV","_jsxDEV","GlobalHistoryView","_s","historyData","setHistoryData","filteredData","setFilteredData","activeFilter","setActiveFilter","showOngoingOnly","setShowOngoingOnly","loading","setLoading","error","setError","viewMode","setViewMode","searchTerm","setSearchTerm","timeRange","setTimeRange","startDate","setStartDate","endDate","setEndDate","showCustomDates","setShowCustomDates","fetchHistoryData","filtered","filter","item","status","term","toLowerCase","number","includes","status_end","params","response","getStatusHistory","getPhoneHistory","data","err","console","handleFilterClick","handleOngoingFilterClick","clearAllFilters","getStatusCounts","counts","yellow","red","ongoing","total","forEach","formatDate","dateString","date","Date","toLocaleString","calculateDuration","start","end","durationMs","Math","floor","handleTimeRangeChange","e","newRange","target","value","handleCustomDateSubmit","preventDefault","groupData","grouped","country","push","getFilterTitle","title","handleViewModeChange","mode","className","children","fileName","_jsxFileName","lineNumber","columnNumber","groupedData","onClick","htmlFor","id","onChange","onSubmit","type","required","placeholder","disabled","length","Object","keys","entries","map","key","events","event","status_start","_c","$RefreshReg$"],"sources":["/Users/benvandijk/Downloads/monitoring/TM/telephony-monitor/client/src/views/GlobalHistoryView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { historyApi } from '../services/api';\nimport StatusIndicator from '../components/StatusIndicator';\nimport './GlobalHistoryView.css';\n\nconst GlobalHistoryView = () => {\n  const [historyData, setHistoryData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [activeFilter, setActiveFilter] = useState(null);\n  const [showOngoingOnly, setShowOngoingOnly] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [viewMode, setViewMode] = useState('country');  // 'country' or 'phone'\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Filter settings\n  const [timeRange, setTimeRange] = useState('5d');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [showCustomDates, setShowCustomDates] = useState(false);\n\n  useEffect(() => {\n    fetchHistoryData();\n  }, [timeRange, viewMode]);\n\n  // Apply filters when activeFilter changes or historyData updates\n  useEffect(() => {\n    // First filter out the \"green\" (online) events as we're only interested in issues\n    let filtered = historyData.filter(item => item.status !== 'green');\n    \n    // Apply status filter if active\n    if (activeFilter) {\n      filtered = filtered.filter(item => item.status === activeFilter);\n    }\n    \n    // Apply search filter if in phone mode\n    if (viewMode === 'phone' && searchTerm) {\n      const term = searchTerm.toLowerCase();\n      filtered = filtered.filter(item => \n        item.number && item.number.toLowerCase().includes(term)\n      );\n    }\n    \n    // Apply ongoing filter if active\n    if (showOngoingOnly) {\n      filtered = filtered.filter(item => item.status_end === null);\n    }\n    \n    setFilteredData(filtered);\n  }, [activeFilter, showOngoingOnly, historyData, viewMode, searchTerm]);\n\n  const fetchHistoryData = async () => {\n    try {\n      setLoading(true);\n      \n      let params = { timeRange };\n      if (timeRange === 'custom' && startDate && endDate) {\n        params.startDate = startDate;\n        params.endDate = endDate;\n      }\n      \n      let response;\n      \n      if (viewMode === 'country') {\n        response = await historyApi.getStatusHistory(\n          params.timeRange,\n          params.startDate,\n          params.endDate\n        );\n      } else {\n        response = await historyApi.getPhoneHistory(\n          params.timeRange,\n          params.startDate,\n          params.endDate,\n          searchTerm || null\n        );\n      }\n      \n      setHistoryData(response.data);\n      setFilteredData(response.data);\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to fetch history data. Please try again later.');\n      setLoading(false);\n      console.error('Error fetching history data:', err);\n    }\n  };\n\n  const handleFilterClick = (status) => {\n    if (activeFilter === status) {\n      // If clicking the same filter again, clear the filter\n      setActiveFilter(null);\n    } else {\n      setActiveFilter(status);\n    }\n  };\n  \n  const handleOngoingFilterClick = () => {\n    setShowOngoingOnly(!showOngoingOnly);\n    // Don't reset status filter\n  };\n  \n  const clearAllFilters = () => {\n    setActiveFilter(null);\n    setShowOngoingOnly(false);\n    setSearchTerm('');\n  };\n  \n  // Get counts by status for issues only\n  const getStatusCounts = () => {\n    const counts = {\n      yellow: 0,\n      red: 0,\n      ongoing: 0,\n      total: 0\n    };\n    \n    historyData.forEach(item => {\n      if (item.status === 'yellow' || item.status === 'red') {\n        counts[item.status] = (counts[item.status] || 0) + 1;\n        counts.total++;\n        \n        // Count ongoing issues\n        if (item.status_end === null) {\n          counts.ongoing++;\n        }\n      }\n    });\n    \n    return counts;\n  };\n\n  // Format date to readable format\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Present';\n    const date = new Date(dateString);\n    return date.toLocaleString();\n  };\n\n  // Calculate duration between start and end times\n  const calculateDuration = (startDate, endDate) => {\n    if (!endDate) return 'Ongoing';\n    \n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const durationMs = end - start;\n    \n    // Less than a minute\n    if (durationMs < 60000) {\n      return `${Math.floor(durationMs / 1000)} seconds`;\n    }\n    // Less than an hour\n    if (durationMs < 3600000) {\n      return `${Math.floor(durationMs / 60000)} minutes`;\n    }\n    // Less than a day\n    if (durationMs < 86400000) {\n      return `${Math.floor(durationMs / 3600000)} hours`;\n    }\n    // More than a day\n    return `${Math.floor(durationMs / 86400000)} days`;\n  };\n\n  const handleTimeRangeChange = (e) => {\n    const newRange = e.target.value;\n    setTimeRange(newRange);\n    setShowCustomDates(newRange === 'custom');\n  };\n\n  const handleCustomDateSubmit = (e) => {\n    e.preventDefault();\n    fetchHistoryData();\n  };\n\n  // Group history data by country or phone number\n  const groupData = (data = filteredData) => {\n    const grouped = {};\n    \n    if (viewMode === 'country') {\n      data.forEach(item => {\n        if (!grouped[item.country]) {\n          grouped[item.country] = [];\n        }\n        grouped[item.country].push(item);\n      });\n    } else {\n      data.forEach(item => {\n        if (!grouped[item.number]) {\n          grouped[item.number] = [];\n        }\n        grouped[item.number].push(item);\n      });\n    }\n    \n    return grouped;\n  };\n\n  // Add a title that shows the current filter status\n  const getFilterTitle = () => {\n    let title = \"\";\n    \n    if (activeFilter) {\n      title += `${activeFilter === 'yellow' ? 'Degraded' : 'Offline'} `;\n    } else {\n      title += \"All \";\n    }\n    \n    title += \"Issues\";\n    \n    if (showOngoingOnly) {\n      title += \" (Ongoing Only)\";\n    }\n    \n    return title;\n  };\n\n  const handleViewModeChange = (mode) => {\n    setViewMode(mode);\n    // Reset filters when changing view mode\n    setActiveFilter(null);\n    setShowOngoingOnly(false);\n    setSearchTerm('');\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading history data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  const groupedData = groupData();\n  \n  return (\n    <div className=\"history-view\">\n      <h1>Global Status History</h1>\n      \n      <div className=\"view-mode-toggle\">\n        <button \n          className={`toggle-btn ${viewMode === 'country' ? 'active' : ''}`}\n          onClick={() => handleViewModeChange('country')}\n        >\n          View by Country\n        </button>\n        <button \n          className={`toggle-btn ${viewMode === 'phone' ? 'active' : ''}`}\n          onClick={() => handleViewModeChange('phone')}\n        >\n          View by Phone Number\n        </button>\n      </div>\n      \n      <div className=\"filter-controls\">\n        <div className=\"time-range-selector\">\n          <label htmlFor=\"timeRange\">Time Range:</label>\n          <select \n            id=\"timeRange\" \n            value={timeRange} \n            onChange={handleTimeRangeChange}\n            className=\"time-range-select\"\n          >\n            <option value=\"24h\">Last 24 Hours</option>\n            <option value=\"48h\">Last 48 Hours</option>\n            <option value=\"5d\">Last 5 Days</option>\n            <option value=\"custom\">Custom Range</option>\n          </select>\n        </div>\n        \n        {showCustomDates && (\n          <form onSubmit={handleCustomDateSubmit} className=\"custom-date-form\">\n            <div className=\"date-input-group\">\n              <label htmlFor=\"startDate\">Start Date:</label>\n              <input \n                type=\"datetime-local\" \n                id=\"startDate\" \n                value={startDate} \n                onChange={(e) => setStartDate(e.target.value)}\n                required\n              />\n            </div>\n            \n            <div className=\"date-input-group\">\n              <label htmlFor=\"endDate\">End Date:</label>\n              <input \n                type=\"datetime-local\" \n                id=\"endDate\" \n                value={endDate} \n                onChange={(e) => setEndDate(e.target.value)}\n                required\n              />\n            </div>\n            \n            <button type=\"submit\" className=\"apply-btn\">Apply</button>\n          </form>\n        )}\n        \n        {viewMode === 'phone' && (\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              placeholder=\"Search phone numbers...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"search-input\"\n            />\n            <button \n              onClick={fetchHistoryData} \n              className=\"search-btn\"\n              disabled={!searchTerm}\n            >\n              Search\n            </button>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"history-summary\">\n        <div className=\"summary-cards\">\n          <div \n            className={`summary-card ${activeFilter === 'red' ? 'active' : ''}`}\n            onClick={() => handleFilterClick('red')}\n          >\n            <h3>Offline Issues</h3>\n            <div className=\"summary-count red\">{getStatusCounts().red}</div>\n            {activeFilter === 'red' && <div className=\"filter-badge\">Filtered</div>}\n          </div>\n          \n          <div \n            className={`summary-card ${activeFilter === 'yellow' ? 'active' : ''}`}\n            onClick={() => handleFilterClick('yellow')}\n          >\n            <h3>Degraded Issues</h3>\n            <div className=\"summary-count yellow\">{getStatusCounts().yellow || 0}</div>\n            {activeFilter === 'yellow' && <div className=\"filter-badge\">Filtered</div>}\n          </div>\n        </div>\n        \n        <div className=\"summary-cards\">\n          <div \n            className={`summary-card ${!activeFilter && !showOngoingOnly ? 'active' : ''}`}\n            onClick={clearAllFilters}\n          >\n            <h3>Total Issues</h3>\n            <div className=\"summary-count blue\">{getStatusCounts().total}</div>\n            {!activeFilter && !showOngoingOnly && <div className=\"filter-badge\">Showing All</div>}\n          </div>\n          \n          <div \n            className={`summary-card ${showOngoingOnly ? 'active' : ''}`}\n            onClick={handleOngoingFilterClick}\n          >\n            <h3>Ongoing Issues</h3>\n            <div className=\"summary-count purple\">{getStatusCounts().ongoing}</div>\n            {showOngoingOnly && <div className=\"filter-badge\">Filtered</div>}\n          </div>\n        </div>\n        \n        <div className=\"summary-info\">\n          <div className=\"info-card\">\n            <h3>Issues Shown</h3>\n            <div className=\"info-value\">{filteredData.length}</div>\n            <div className=\"info-detail\">\n              {activeFilter \n                ? `${activeFilter === 'yellow' ? 'Degraded' : 'Offline'} incidents` \n                : (showOngoingOnly ? 'Ongoing incidents' : 'All incidents')}\n            </div>\n          </div>\n          <div className=\"info-card\">\n            <h3>Countries</h3>\n            <div className=\"info-value\">{Object.keys(groupedData).length}</div>\n            <div className=\"info-detail\">\n              {activeFilter \n                ? `With ${activeFilter === 'yellow' ? 'degraded' : 'offline'} issues` \n                : (showOngoingOnly ? 'With ongoing issues' : 'With issues')}\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"history-header\">\n        <h2>{viewMode === 'country' ? 'Countries' : 'Phone Numbers'} - {getFilterTitle()}</h2>\n        {(activeFilter || showOngoingOnly || searchTerm) && (\n          <button \n            className=\"clear-filter visible\"\n            onClick={clearAllFilters}\n          >\n            Clear All Filters\n          </button>\n        )}\n      </div>\n      \n      <div className=\"history-list\">\n        {Object.entries(groupedData).map(([key, events]) => (\n          <div key={key} className={viewMode === 'country' ? \"country-history-card\" : \"phone-history-card\"}>\n            <h2>{key}</h2>\n            <table className=\"history-table\">\n              <thead>\n                <tr>\n                  <th>Status</th>\n                  <th>Started</th>\n                  <th>Ended</th>\n                  <th>Duration</th>\n                  {viewMode === 'phone' && <th>Country</th>}\n                  {viewMode === 'phone' && <th>Type</th>}\n                </tr>\n              </thead>\n              <tbody>\n                {events.map((event) => (\n                  <tr key={event.id} className={`status-${event.status}`}>\n                    <td>\n                      <StatusIndicator status={event.status} />\n                    </td>\n                    <td>{formatDate(event.status_start)}</td>\n                    <td>{formatDate(event.status_end)}</td>\n                    <td>{calculateDuration(event.status_start, event.status_end)}</td>\n                    {viewMode === 'phone' && <td>{event.country}</td>}\n                    {viewMode === 'phone' && <td>{event.type || 'N/A'}</td>}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ))}\n        \n        {Object.keys(groupedData).length === 0 && (\n          <div className=\"no-results\">\n            No {viewMode === 'country' ? 'countries' : 'phone numbers'} match the current filters.\n            <button onClick={clearAllFilters} className=\"clear-link\">Clear filters</button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GlobalHistoryView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}